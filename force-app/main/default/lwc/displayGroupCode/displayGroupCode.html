<template>


   <!--  <lightning-card> --> 
      <!--<div>
         <template if:true={isLoading}>
            <lightning-spinner alternative-text="Loading" variant="brand" size="large">
            </lightning-spinner>
         </template>
   </div> -->
   
      <template if:false={hideEditRegionButton}>
      <div class="slds-m-top_small slds-m-bottom_medium slds-align_absolute-center" >
               <lightning-button variant="brand" label="Edit Region" title="Edit Region"
               onclick={showModalBox} ></lightning-button>
      </div>
      </template>
   <!-- </lightning-card>  -->
   <template if:true={isShowModal}>
   <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
      <div class="slds-modal__container">
      <!-- modal header start --> 
      


         <header class="slds-modal__header">
            
            <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={hideModalBox}>
               <lightning-icon icon-name="utility:close"
                  alternative-text="close"
                  variant="inverse"
                  size="small" ></lightning-icon> 
               <span class="slds-assistive-text">Close</span>
            </button>
            <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Edit Regions</h2>
         
         </header>
         <div class="slds-modal__content slds-p-around_medium slds-grid slds-wrap" id="modal-content-id-1">
         <div class="slds-col slds-size_1-of-1" > 
            <template if:false={isLoading}>

         <lightning-record-edit-form object-api-name={objectApiName} record-id={recordId}>
            <lightning-input-field field-name="Group_Type__c" onchange={groupTypeChange} value={selectedGroupType}> </lightning-input-field>
            <!--<lightning-input-field field-name="Brand__c" value={brandNameValue} onchange={brandChange} > </lightning-input-field> 
            <lightning-input-field field-name="Brand__c" value={brandNameValue} onchange={brandChange} read-only="true"></lightning-input-field>-->
            <lightning-output-field field-name="Brand__c" ></lightning-output-field>
         </lightning-record-edit-form>
      </template>
         <template if:true={isLoading}>
            <lightning-spinner alternative-text="Loading..." size="medium">
            </lightning-spinner>
      </template>
      <div class="slds-align_absolute-center">
      <button class="slds-button slds-button_neutral" onclick={hideModalBox}>Cancel</button>
      <button class="slds-button slds-button_brand"  onclick={getRegionalDetails}>Get Regional Details</button>
      </div>
      
      </div>
            <template if:true={showGroupDetails}>
               <div class="slds-col slds-size_1-of-1" style="margin-top: 1rem;"> 
                     <table style="border-collapse:collapse;" >
                        <tbody>
                        <tr>
                        <th style="border:1px solid black; padding-left: 0.5rem; width:20%">
                                 <lightning-input data-id="toggle" type="checkbox" label="Select All" onchange={handleSelectAll}></lightning-input>
                        </th>
                         <th style="border:1px solid black; padding-left: 0.5rem;">Name</th>
                        <th style="border:1px solid black; padding-left: 0.5rem;">Description</th>
                        <!-- Below line is commented by Manohar on 20 Apr as part of feedback-->
                        <!--<th style="border:1px solid black; padding-left: 0.5rem;">Group Code</th>-->
                        </tr>

                        <template for:each={groupDetails} for:item="groupInfo" for:index="index">
                        <tr key={groupInfo.id}>
                        <td  style="border:1px solid black; padding-left: 0.5rem;">
                              <lightning-input data-id="toggle" name={groupInfo.desc} value={groupInfo.cd} data-index={index} type="checkbox" label="" onchange={handleChange}></lightning-input>
                        </td>
                        <td  style="border:1px solid black; padding-left: 0.5rem;">{groupInfo.name} </td>
                        <td  style="border:1px solid black; padding-left: 0.5rem;">{groupInfo.desc} </td>
                        <!-- Below line is commented by Manohar on 20 Apr as part of feedback-->
                        <!--<td  style="border:1px solid black; padding-left: 0.5rem;">{groupInfo.cd}</td>--> 
                     </tr> 
                     </template>
                     </tbody>
                  </table>
               </div>        
            </template>
               <template if:true={showNoData}>
            <h2> No group information to display for the selected brand and group type. </h2>
         </template>
         </div>
      
         <!-- modal footer start -->
         <template if:true={showGroupDetails}>
         <footer class="slds-modal__footer">
            <button class="slds-button slds-button_neutral" onclick={hideModalBox}>Cancel</button>
            <button class="slds-button slds-button_brand"  onclick={saveDetails}>Save</button>
         </footer>
         </template>
      
      </div>
   </section>
   <div class="slds-backdrop slds-backdrop_open"></div>
   </template> 

   <!--Error Popup model-->
   <!--Added by disha on 17th feb 2023-->
   <template if:true={showErrorModal}>
      <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
         <div class="slds-modal__container">
         <!-- modal header start --> 
            <header class="slds-modal__header">
               <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={hideErrorModal}>
                  <lightning-icon icon-name="utility:close"
                     alternative-text="close"
                     variant="inverse"
                     size="small" ></lightning-icon> 
                  <span class="slds-assistive-text">Close</span>
               </button>
               <h2 id="modal-heading-02" class="slds-text-heading_medium slds-hyphenate">Edit Regions</h2>
            </header>
      
            <div class="slds-modal__content slds-p-around_medium slds-grid" id="modal-content-id-2">
            <div class="slds-align_absolute-center" style="color:red;text-align: center;">
               <template if:true={showNationalErr}>
                  <h2> You can not edit region if your offer availability is “National”.</h2>
               </template>
               <template if:true={showfieldMadatoryErr}>
                  <h2> Please fill all mandatory fields [Group Type, Brand]</h2>
               </template>
               <template if:true={showErrorMsg}>
                  <h2> Something went wrong! Please try again. </h2>
               </template>
            </div> 
            </div>
         
            <!-- modal footer start -->
            <footer class="slds-modal__footer">
               <button class="slds-button slds-button_neutral" onclick={hideErrorModal}>Cancel</button>
            </footer>
         
         </div>
      </section>
      <div class="slds-backdrop slds-backdrop_open"></div>
      </template> 
      <!--End of error pop-up model-->
      <template if:true={isLoading}>
            <lightning-spinner alternative-text="Loading..." size="medium">
            </lightning-spinner>
      </template>
   </template>